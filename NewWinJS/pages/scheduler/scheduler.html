<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Scheduler</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.2.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.2.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.2.0/js/ui.js"></script>

    <link href="/css/default.css" rel="stylesheet" />
    <link href="/pages/scheduler/scheduler.css" rel="stylesheet" />
    <script src="/pages/scheduler/scheduler.js"></script>
</head>
<body>
    <!-- The content that will be loaded and displayed. -->
    <div class="fragment schedulerpage">
        <header id="header" aria-label="Header content" role="banner">
            <button data-win-control="WinJS.UI.BackButton"></button>
            <h1 class="titlearea win-type-ellipsis">
                <span class="pagetitle">Scheduler Control</span>
            </h1>
        </header>
        <section id="content" aria-label="Main content" role="main">
            <div class="container">
                <div class="democontent">
                    <h2>Scheduler Control</h2>

                    <button id="scheduleJobs">Run Jobs</button>
                    
                    <hr />

                    <ul>
                        <li>
                            <span class="label normal">Job #1</span>
                            <span id="job1status" class="status notrunning"></span>
                        </li>
                        <li>
                            <span class="label high">Job #2</span>
                            <span id="job2status" class="status notrunning"></span>
                        </li>
                        <li>
                            <div class="label idle">Job #3</div>
                            <div id="job3status" class="status notrunning"></div>
                        </li>
                        <li>
                            <div class="label belowNormal">Job #4</div>
                            <div id="job4status" class="status notrunning"></div>
                        </li>
                        <li>
                            <div class="label aboveNormal">Job #5</div>
                            <div id="job5status" class="status notrunning"></div>
                        </li>
                    </ul>

                </div>
                <hr />
                <div class="codecontent">
                    <h2>scheduler.html</h2>
                    <pre class="prettyprinted">
<span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"scheduleJobs"</span><span class="tag">&gt;</span><span class="pln">Run Jobs</span><span class="tag">&lt;/button&gt;</span><span class="pln">
                    
</span><span class="tag">&lt;hr</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;ul&gt;</span><span class="pln">
    </span><span class="tag">&lt;li&gt;</span><span class="pln">
        </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"label normal"</span><span class="tag">&gt;</span><span class="pln">Job #1</span><span class="tag">&lt;/span&gt;</span><span class="pln">
        </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"job1status"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"status notrunning"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln">
    </span><span class="tag">&lt;/li&gt;</span><span class="pln">
    </span><span class="tag">&lt;li&gt;</span><span class="pln">
        </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"label high"</span><span class="tag">&gt;</span><span class="pln">Job #2</span><span class="tag">&lt;/span&gt;</span><span class="pln">
        </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"job2status"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"status notrunning"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln">
    </span><span class="tag">&lt;/li&gt;</span><span class="pln">
    </span><span class="tag">&lt;li&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"label idle"</span><span class="tag">&gt;</span><span class="pln">Job #3</span><span class="tag">&lt;/div&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"job3status"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"status notrunning"</span><span class="tag">&gt;&lt;/div&gt;</span><span class="pln">
    </span><span class="tag">&lt;/li&gt;</span><span class="pln">
    </span><span class="tag">&lt;li&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"label belowNormal"</span><span class="tag">&gt;</span><span class="pln">Job #4</span><span class="tag">&lt;/div&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"job4status"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"status notrunning"</span><span class="tag">&gt;&lt;/div&gt;</span><span class="pln">
    </span><span class="tag">&lt;/li&gt;</span><span class="pln">
    </span><span class="tag">&lt;li&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"label aboveNormal"</span><span class="tag">&gt;</span><span class="pln">Job #5</span><span class="tag">&lt;/div&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"job5status"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"status notrunning"</span><span class="tag">&gt;&lt;/div&gt;</span><span class="pln">
    </span><span class="tag">&lt;/li&gt;</span><span class="pln">
</span><span class="tag">&lt;/ul&gt;</span>
                    </pre>

                    <h2>scheduler.js</h2>
                    <pre class="prettyprinted">
<span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"use strict"</span><span class="pun">;</span><span class="pln">
    </span><span class="typ">WinJS</span><span class="pun">.</span><span class="pln">UI</span><span class="pun">.</span><span class="typ">Pages</span><span class="pun">.</span><span class="pln">define</span><span class="pun">(</span><span class="str">"/pages/scheduler/scheduler.html"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// This function is called whenever a user navigates to this page. It</span><span class="pln">
        </span><span class="com">// populates the page elements with the app's data.</span><span class="pln">
        ready</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">element</span><span class="pun">,</span><span class="pln"> options</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            prettyPrint</span><span class="pun">(</span><span class="pln">element</span><span class="pun">);</span><span class="pln">
            document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"scheduleJobs"</span><span class="pun">).</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">"click"</span><span class="pun">,</span><span class="pln"> scheduleJobs</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">});</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> order </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">var</span><span class="pln"> S </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WinJS</span><span class="pun">.</span><span class="typ">Utilities</span><span class="pun">.</span><span class="typ">Scheduler</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">function</span><span class="pln"> scheduleJobs</span><span class="pun">(</span><span class="pln">eventObject</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        
        </span><span class="kwd">var</span><span class="pln"> job1status </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"job1status"</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">var</span><span class="pln"> job2status </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"job2status"</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">var</span><span class="pln"> job3status </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"job3status"</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">var</span><span class="pln"> job4status </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"job4status"</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">var</span><span class="pln"> job5status </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"job5status"</span><span class="pun">);</span><span class="pln">
        resetStatus</span><span class="pun">(</span><span class="pln">job1status</span><span class="pun">);</span><span class="pln">
        resetStatus</span><span class="pun">(</span><span class="pln">job2status</span><span class="pun">);</span><span class="pln">
        resetStatus</span><span class="pun">(</span><span class="pln">job3status</span><span class="pun">);</span><span class="pln">
        resetStatus</span><span class="pun">(</span><span class="pln">job4status</span><span class="pun">);</span><span class="pln">
        resetStatus</span><span class="pun">(</span><span class="pln">job5status</span><span class="pun">);</span><span class="pln">
        order </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
        scheduleJob</span><span class="pun">(</span><span class="pln">job1status</span><span class="pun">,</span><span class="pln"> S</span><span class="pun">.</span><span class="typ">Priority</span><span class="pun">.</span><span class="pln">normal</span><span class="pun">);</span><span class="pln">
        scheduleJob</span><span class="pun">(</span><span class="pln">job2status</span><span class="pun">,</span><span class="pln"> S</span><span class="pun">.</span><span class="typ">Priority</span><span class="pun">.</span><span class="pln">high</span><span class="pun">);</span><span class="pln">
        scheduleJob</span><span class="pun">(</span><span class="pln">job3status</span><span class="pun">,</span><span class="pln"> S</span><span class="pun">.</span><span class="typ">Priority</span><span class="pun">.</span><span class="pln">idle</span><span class="pun">);</span><span class="pln">
        scheduleJob</span><span class="pun">(</span><span class="pln">job4status</span><span class="pun">,</span><span class="pln"> S</span><span class="pun">.</span><span class="typ">Priority</span><span class="pun">.</span><span class="pln">belowNormal</span><span class="pun">);</span><span class="pln">
        scheduleJob</span><span class="pun">(</span><span class="pln">job5status</span><span class="pun">,</span><span class="pln"> S</span><span class="pun">.</span><span class="typ">Priority</span><span class="pun">.</span><span class="pln">aboveNormal</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">function</span><span class="pln"> scheduleJob</span><span class="pun">(</span><span class="pln">el</span><span class="pun">,</span><span class="pln"> priority</span><span class="pun">,</span><span class="pln"> work</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        S</span><span class="pun">.</span><span class="pln">schedule</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">job</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            delay</span><span class="pun">(</span><span class="lit">2</span><span class="pun">);</span><span class="pln">
            </span><span class="typ">WinJS</span><span class="pun">.</span><span class="typ">Utilities</span><span class="pun">.</span><span class="pln">addClass</span><span class="pun">(</span><span class="pln">el</span><span class="pun">,</span><span class="pln"> </span><span class="str">"joborder"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">order</span><span class="pun">++));</span><span class="pln">
        </span><span class="pun">},</span><span class="pln"> priority</span><span class="pun">);</span><span class="pln">
        
        </span><span class="typ">WinJS</span><span class="pun">.</span><span class="typ">Utilities</span><span class="pun">.</span><span class="pln">addClass</span><span class="pun">(</span><span class="pln">el</span><span class="pun">,</span><span class="pln"> </span><span class="str">"scheduled"</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">function</span><span class="pln"> resetStatus</span><span class="pun">(</span><span class="pln">el</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="pun">[</span><span class="str">"notrunning"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"scheduled"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"running"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"joborder0"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"joborder1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"joborder2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"joborder3"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"joborder4"</span><span class="pun">].</span><span class="pln">forEach</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">className</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">WinJS</span><span class="pun">.</span><span class="typ">Utilities</span><span class="pun">.</span><span class="pln">removeClass</span><span class="pun">(</span><span class="pln">el</span><span class="pun">,</span><span class="pln"> className</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">});</span><span class="pln">
        </span><span class="typ">WinJS</span><span class="pun">.</span><span class="typ">Utilities</span><span class="pun">.</span><span class="pln">addClass</span><span class="pun">(</span><span class="pln">el</span><span class="pun">,</span><span class="pln"> </span><span class="str">"notrunning"</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">function</span><span class="pln"> delay</span><span class="pun">(</span><span class="pln">seconds</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">var</span><span class="pln"> e </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">().</span><span class="pln">getTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">seconds </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">().</span><span class="pln">getTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">})();</span>
                    </pre>
                </div>
                <div class="clear"></div>

            </div>
        </section>
    </div>
</body>
</html>
